<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시크릿클래스 - 대한민국 1호 아파트 큐레이터 시크릿브라더</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 아이콘 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @font-face {
            font-family: 'Jalnan';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonnu-fonts_two@1.0/Jalnan.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        * { font-family: 'Jalnan', sans-serif !important; }
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap');
        body { letter-spacing: -0.02em; }
        .font-body { font-family: 'Pretendard', sans-serif !important; }
        .book-shadow { box-shadow: 10px 10px 30px rgba(0,0,0,0.5); }
        html { scroll-behavior: smooth; }
        .hidden-section { display: none !important; }
        
        /* 모바일 줄바꿈 방지 */
        .break-keep { word-break: keep-all; word-wrap: break-word; }

        @keyframes modal-pop {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-content { animation: modal-pop 0.2s ease-out forwards; }
        
        .review-card { cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .review-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        
        /* 모달 스크롤바 커스텀 */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-track { background-color: #f1f5f9; }
        
        /* 후기 본문 스타일 */
        .raw-content { line-height: 1.8; color: #374151; white-space: pre-wrap; font-size: 0.95rem; }
        .line-clamp-custom {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            white-space: pre-wrap;
        }
    </style>
    
    <!-- 새로고침 시 맨 위로 이동 -->
    <script>
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        } else {
            window.onbeforeunload = function () {
                window.scrollTo(0, 0);
            }
        }
    </script>
    
    <!-- Firebase Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase 초기화
        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // 1. 데이터 정의 (오류 방지를 위해 최상단 배치)
        // all_reviews.html의 BEST 데이터와 100% 동일한 원본
        const reviewData = [
            {
                title: "3년간 못했던 내집마련, 시브님 만나고 2주만에 성공!",
                content: `안녕하세요!\n결혼을 준비하던 약 3년 전부터 부동산을 째려보던 제가\n시브님을 만나고 약 2주만에 서울에 내집 마련을 했습니다!\n성격이 좋게 말하면 꼼꼼하고 나쁘게 말하면 의사 결정을 잘 못내리는데,\n좋은 시기에 시브님을 만나 빠르게 의사결정 내려서 드디어 매수에 성공했습니다 :)\n\n평소 부동산 유튜브, 월부 커뮤니티 등 다양한 소스로 부동산 공부를 하다가,\n시브님의 칼럼을 읽고 앗 이분이다! 하는 생각이 들어\n시브님을 알게되고 바로 다음 날에 큐레이팅 컨설팅을 신청하였는데요!\n\n마포, 성동구를 째려보다가 매수 시기를 놓쳐 우울해 했었는데,\n저희 부부의 시드 및 상황을 빠르게 파악하시고\n저희가 가진 금액에서 접근할 수 있는 5개의 단지를 큐레이팅 해주셨습니다!\n\n처음 봤던 단지들이 대부분이라,\n중간에 제가 더 아파트를 서치해보았지만\n시브님이 정말 귀신같이(?) 더 나은 매물들만 골라주셨더라구요 ㅎㅎㅎ\n\n그래서 큐레이팅이 정말 많은 시간을 단축해주는구나! 하는 생각을 했고\n(진행하시는 분들은 믿고 가셔도 좋을 것 같습니다!!!)\n중간 중간 지금 더 찾을 때가 아니라 얼른 가서 임장하고 부동산 볼때다 라고 회초리(?)를 들어주신 것도\n밍기적 거리는 저에게 큰 도움이 됐습니다!\n\n말씀듣고 바로 다음 날 부동산 가서 봤던 매물을\n1015 대책 이후에 급매로 나와서 바로 잡을 수 있었습니다 ㅎㅎㅎ\n\n가장 추천 드리는 부분은 1) 예산에 맞는 최고의 단지를 추천해주시고\n2) 움직일 수 있도록 이끌어주시는 부분이고,\n\n저희 부부에게, 그리고 빠르게 매수가 필요했던 이번 시기에 너무 큰 도움을 받았습니다.\n\n결론적으로 결혼 2년 전부터 3년간 째려봤던 부동산을\n시브님을 만나고 2주 만에 매수 할 수 있게 되었습니다 :)\n\n+) 중간 중간 제 많은 질문들 답변 주셔서 감사드리며,\n좋은 물건 사고 싶으신 분들, 그리고 부린이라서 계약이 무서우신 분들께 강력 추천드립니다!\n\n감사합니다 시브님 :)\n(갈아타기때 또 뵙겠습니다!)`,
                author: "김아름님", date: "2025-11-04", rating: 5, badge: "BEST"
            },
            {
                title: "시크릿큐레이팅후기_막막함에 확신이 생깁니다. 돈 안 아까움 주의!!",
                content: `안녕하세요, 전 9월 중순에 큐레이팅을 받았습니다.\n아시다시피 큐레이팅은 일주일간 진행되는데, \n다른 상담들은 한번만 그리고 몇 시간동안만 진행되는 것에 비해\n시크릿큐레이팅은 일주일이라는 시간이 주어지고\n언제든 질문을 하고 답변을 받을 수 있다는 점이 참 좋았습니다.\n \n저는 큐레이팅을 시작했을 당시, 실거주와 투자. 어느 것을 하는 것이 좋을 지도 결정 못하고 있었습니다.\n시브님은 제 의견은 다 들어주시되, 시브님의 의견을 근거를 들어가며 설명해 주시고,\n저에게 선택권을 주셨습니다.\n덕분에 전 실거주로 방향성을 잡게 되었고,\n시브님의 근거들 덕분에 제 방향성에 확신을 더할 수 있었습니다.\n \n그리고, 상담을 많이 해보셔서 그런 걸까요? 아님 책이나 여러 경험들을 통해 그릇이 커서 그런 걸까요?\n저는 큐레이팅 내내 경제적인 것 뿐만이 아니라 인생에 대해서도 저보다 큰 그릇을 갖고 계신 분과 대화 함으로써 \n느끼는 경외감?이 있었습니다.\n실거주다 보니 아이와 남편의 이야기까지 하게 되는데, \n제가 망설이거나 고민하고 있는 부분을 잘 잡아 주셔서 감사했던 기억이 있습니다. \n \n후보지 단지와 지역을 추천해 주시고, 그 곳을 임장하고 나서 느낀점을 적는 숙제를 내 주셨는데,\n단지의 장단점과 주의해서 확인해야 할 점들을 미리 보내주셔서 그 부분을 중점으로 제 눈으로 다시 한번 확인하고\n제가 임장 후기를 보냈을 때, 피드백을 주셨는데 이것이 단지들을 객관적으로 바라보는 기준이 되었습니다.\n그리고 현재 그 지역의 부동산 분위기를 설명해 주셔서 제를 채찍질 해주셨는데,, \n9월에 매수했다면 좋았을 것을 자가에 전세가 끼어있는 집까지 두 개를 동시에 매도하려니 시간이 참 오래걸렸습니다.\n자가 매도시에도 시브님의 채찍질이 참 도움이 많이 됐어요.\n그렇게 일주일이라는 기간이 후딱 가고, 큐레이팅이 끝났죠.\n \n아!!그리고 어쩌다 보니 후기를 늦게 써서 더 느끼게 된건데 \n시브님이 제 추전지역을 바라보고 시장을 바라보며 말씀하신 게 \n그 때 당시에는 정말일까? 라는 의구심?도 아주 조금은 있었는데\n지나고 보니 진짜였어요.\n \n그리고, 몇 달이 지난 이 시점에 전 매도를 다 끝내고 \n제가 원하는 지역에 드디어 매수했습니다.\n9월과 11월 사이에 정책으로 부동산시장은 엄청 혼란스러웠고\n지금도 그 때의 큐레이팅 내용이 유효할까? 생각하며\n나눈 대화를 다시 한번 읽어나가며 \n아직도 유효하다는 판단을 할 수 있었고 괜찮은 가격이다.\n라는 확신으로 매수를 진행할 수 있었습니다.\n \n시크릿큐레이팅은 내가 어떤 질문을 하느냐에 따라 제가 얻고자 하는 대답보다 더 많은 것을 얻어갈 수 있습니다.\n그리고, 혹시 저처럼 질문을 못 하면 어떻하지?라고 생각하셔도 괜찮습니다. \n알아서 물어봐 주시거든요.\n30만원으로 3000만원의 가치를 줄 수 있다는 시크릿큐레이팅의 홍보문구는 과장이 아닙니다.\n읽어주셔서 감사합니다.`,
                author: "이수정님", date: "2025-12-01", rating: 5, badge: "BEST"
            },
            {
                title: "큰 돈이 들어가는 만큼, 경험이 적은 만큼 전문가의 조언을 얻어야 한다.",
                content: `안녕하세요? 이번 시크릿 큐레이팅을 받으며 감사하게도 한 주만에 매도와 매수를 모두 하였고 계약서 작성을 앞두고 있습니다.\n저는 평소 시크릿브라더님 블로그를 보며 공부하고 있던 수강생입니다. 23년도 저는 갈아타기를 했었습니다. 전문가 조언 없이요!\n하지만 시간이 갈수록 가치가 낮다는 것을 알게 되었고, 그 당시 매수할 수 있었던 다른 물건들은 1-2억씩 먼저 오르는 상황이 되었습니다.\n그래서 이번엔 전문가이신 시브님 큐레이팅을 신청하게 되었습니다!\n결과적으로 좋은 물건을, 좋은 가격에 매수할 수 있었던 건 시크릿 큐레이팅 덕분입니다.\n \n1. 신청하게 된 계기\n저는 평소 시크릿브라더님 블로그를 보며 공부하고 있던 수강생입니다.\n23년도 저는 갈아타기를 했었습니다. 전문가 조언 없이요!\n그 당시에는 몇 십만원도 크게 느껴져서 전문가 조언을 얻을 생각도 하지 못했고\n제가 나중에 거주할 것이라는 이유로, 또 대출은 부담없는 수준으로 하고 싶다는 이유로\n제가 가지고 있는 돈으로, 제가 아는 선에서 매수했었습니다.\n\n하지만 시간이 갈수록 가치가 낮다는 것을 알게 되었고, 그 당시 매수할 수 있었던 다른 물건들은 1-2억씩 먼저 오르는 상황이 되었습니다.\n그러다 기존 세입자분께서 2년 계약 만기로 25년 12월 말에 나가겠다고 통보하셨고\n저도 세입자를 다시 구해 세를 더 연장할까, 아니면 이참에 갈아타기를 할까 고민을 했었습니다.\n\n그래도 매도하고 갈아타는 게 맞다는 생각에\n10월 중순쯤 제 물건을 부동산에 내놓았습니다.\n그리고 나서 집을 많이 보러 오는지 확인차 1~2번 부동산에 연락드리니,\n모두 현재 세입자가 집을 깨끗하게 쓰지 않아 집 상태가 별로이니 많이 가격을 낮춰야 한다며 같은 말씀을 하셨습니다\n하지만 가격을 너무 낮출 경우, 이미 오른 다른 단지로 갈아타기가 쉽지 않을 듯하여 저 스스로도 매도에 확신이 서지 않았습니다.\n그래서 제가 생각한 목표 매도가는 꼭 받고 싶은데, 이것이 현 상황을 모르고 억지를 부리는 건것은 아닌지 우려되어\n전문가이신 시브님 큐레이팅을 신청하게 되었습니다!\n\n2. 진행 과정\n아이 하원하러 가기 전에 결제했었는데\n매니저님이라고 하시며 결제가 확인되었으니 바로 시브님과의 오픈채팅방 주소를 알려주셨습니다.\n아이와 정신없었지만, 우선 첫 인사를 드리고 나니 시브님께서 대략적인 제 상황을 적을 양식을 보내주셨습니다.\n그래서 아이들을 모두 재우고\n매수 목표 지역, 현재 거주지, 부부 연봉, 현재 투자금, 월 저축액, 가족 구성원, 우선 순위 등등\n정말 자세한 질문들에 꼼꼼히 답변하였고, 시브님께서  TMI도 좋으니  쓸데없는 것도 모두 알려달라고 하셔서 현 세입자 상황도 알려드렸었습니다.\n그리고 바로 제가 고민하고 있는 매도, 매수, 고려하고 있는 단지에 대해 너무나 상세하게 말씀해주셨습니다.\n\n그리고 다음날까지 매수 가능한 가격대의 다른 단지들도 찾아보시겠다고 하셨고\n정말 다음날 오전에 시브님께서 3곳을 더 추천해주셨고, 저도 남편도 알고는 있었던 곳이지만 저희 재정상 무리하는 것이 아닐까 싶어 크게 고려하지 않았던 곳이었습니다.\n\n그래서 다음날 재차 제 고민을 말씀드렸습니다.\n대출 적정 금액, 매도하고 바로 매수하는 어려움, 투자금에 따른 단지 우선순위 등 확신이 부족한 것에 대해\n몇 시간도 안 되어 시브님께서 상세히 말씀해주셨고, 덕분에 제 불안을 가라앉힐 수 있었습니다^^\n\n그리고 큐레이팅 4일차에 갑자기 부동산에서 매수콜이 들어왔습니다.\n제가 마지노선으로 말한 가격에 사려는 사람이 있으니 계좌를 달라는 것이었습니다!\n제 물건도 이제서야 상승 바람을 탄 듯 했고, 실제 매수할 만한 물건이 거의 없는 상황에서 너무 싸게 파는 것은 아닌가 걱정이 되었습니다.\n그래서 부동산 사장님께는 남편과 상의 후, 다음날 다시 연락드리겠다고 말씀드리고 시브님의 조언을 기다렸습니다.\n(정말 이 때는 시크릿 큐레이팅을 며칠 전에 신청한 건 신의 한 수 였다며 스스로를 칭찬햇었습니다 ㅎㅎ)\n\n간절히 기다렸던 시브님의 답변은 여러 사유를 들어가며 매도를 하라는 것이었습니다.\n저도 충분히 이해가 되었고, 사장님께 바로 계좌를 보내드려 매도 가계약을 마무리 지었습니다.\n\n그리고 전임을 통해 리스트업 한 단지 10여 개를 그 날 밤 시브님께 보내드렸고\n시브님께서 읽어보시고 다음 날 오전에\n입지 순서, 매물 우선순위를 꼼꼼하게 정리해주셨습니다.\n그걸 토대로 바로 남편이 먼저 부동산을 방문했고 1순위로 보는 매물 상황에 대해 더 구체적으로 여쭈어보았습니다.\n\n큐레이팅 7일차, 시브님께서 가격, 조건을 보시며 제가 보고 있는 매물들이 나쁘지 않다며 \n시간을 더 끌지 말고, 후보도 늘리지 말고, 네고를 해서 바로 매수하라는 말씀에!!! \n이번엔 제가 부동산으로 달려가서 집을 확인하고 매수를 하려 했습니다\n그런데? 매도자분께서 갑자기 계좌를 달라니 고민이 되셨는지 내일까지 더 고민해보시겠다고 하셨고\n저도 다른 단지의 여러 매물들을 총정리하며\n다음날 한 번 더 시브님께 매물들의 우선순위에 대해 여쭈어보았습니다.\n\n그런데 제가 보던 매물이 거래가 안되면 그냥 다른 단지의 매물을 보라고 조언해주셨고,\n사실 다른 단지는 제대로 보지 않은 곳이라 약간의 거부감이 있었습니다.\n그럼에도 가치가 있고, 현재 가진 투자금으로 투자할 수 있으며, 무리하는 것이 아니라는 말씀에\n긍정적으로 검토하며 여러 부동산 사장님과 통화를 했었습니다.\n그리고 대략 3개 정도의 매물로 추려졌고, 저도 남편도 그 중에서 정말 치열하게 고민했고\n그래도 불안한 마음에 한 번 더 시브님께 문의를 드렸었습니다 (끝없는 불안함 ㅋㅋ)\n시브님께서는 어떤 걸 사도 괜찮으니 집상태 그나마 제일 좋은 걸로 하면 된다고\n골라서 살 수 있는 이 상황이 좋은 거라며 응원해주셨습니다 ♡\n\n이날 저녁엔 가계약금을 반드시 넣고 마무리하겠다고 다짐한 상황인터라\n시브님께서 추천해주신 2순위 매물에 연락하여 네고를 요청하였고\n5분도 안 되서 네고 가능하다며 바로 가계약금 입금하면 된다는 연락이 왔었습니다 ^^\n\n그 결과 큐레이팅 7일차에 바로 가계약금을 넣어 매수를 완료하였습니다.\n\n일 잘하는 부동산 사장님을 만난 운도 있었지만\n시간이 갈수록 매수한 물건이 비교군 중에서 조건도 좋고, 상태도 좋고, 환금성이 더 좋은 매물이라는 생각이 듭니다.\n시브님의 인사이트가 없었다면\n제가 감당할 수 없는 매물이라 생각하여 제대로 검토하지 못했을텐데\n좋은 물건을, 좋은 가격에 매수할 수 있었던 건 시크릿 큐레이팅 덕분입니다.\n\n3. 추천하는 이유\n최근 읽은 책에서 지혜로운 판단을 하기 위해서는 '지혜로운 사람과 교류하며 물어봐야 한다.'라는 글귀가 있었습니다.\n제 개인의 경험과 지식에는 한계가 있다는 점을 인정하고, 시크릿 큐레이팅을 신청한 결과\n제 생각을 부동산 전문가인 시브님과 바로 바로 비교할 수 있었고\n제가 생각하지 못한 부분은 보완할 수 있었고\n그래서 엄청 큰 돈이 들어가는 부동산 매수-매도를 무사히 마무리할 수 있게 되었습니다.\n\n더불어 일주일 간 채팅방에서 실시간으로 큐레이팅을 받을 수 있다는 건 참 감사한 일이었습니다^^\n보통 전문가 컨설팅의 경우, 1회성으로 조언이 끝나버려 많이 아쉬웠는데 \n시크릿 큐레이팅은 일주일이 지나도록, 계약서 작성과 특약까지 검토해주신다고 하셔서 감개무량합니다.\n\n귀한 시간 내어\n하나부터 열까지 꼼꼼하게 큐레이팅 해주신 시크릿브라더님께 정말 감사드리며\n저처럼 부동산 경험이 적으신 분들은 꼭 시크릿 큐레이팅을 이용하여 좋은 자산을 매수하시길 바랍니다.\n감사합니다.`,
                author: "이서연님", date: "2025-11-27", rating: 5, badge: "BEST"
            },
            {
                title: "조정지역 발표 다음날 동탄 매수 시크릿큐레이팅 후기",
                content: `안녕하세요 전 추석직전 큐레이팅 신청하고 추석연휴동안  갈아타기를 위해 열심히 임장을 다녔습니다.\n70일 아기를 데리고 임장을 하는 것이 정말 쉽지 않았는데요. 아기와 나중에 실거주와 투자하기 좋은 곳으로 살고싶다는\n목표로 버틴것 같습니다.\n추석연휴동안 부동산 사장님들과 연락이 쉽지 않았고 매물을 볼수도 없었기에 제 마음은 굉장히 조급했습니다.\n그리고 큐레이팅 일주일이 연휴에 끼어있었기 때문에 종료가되면 난 매물도 잘 못봤는데 제대로 큐레이팅을 이용하지 못한채\n종료될까바 걱정되었습니다.\n하지만 시부님께서는 큐레이팅기간 종료후에도 제가 계약종료를 마칠때까지 잘 이끌어주셨습니다.\n그점이 너무 감사했습니다.\n\n<제가 큐레이팅을 진행하며 가장 좋았던 점은>\n1. 나의 사고를 확장시킬 수 있었던점 > 혼자서 부동산 공부를 하거나 시장을 바라보는 것은 한계가 있는데 다양한 사람들을 많이만나고\n상담을 해보신 시부님은 현재 부동산 상황과 분위기등을 잘 파악하고 계셔서 현재 상황이 이러니 이렇게 하면 좋겠다 라는 점을 알려주셔서서도움이 되었습니다.\n2.평소 부동산에 대해 궁금한 것을 마음껏 질문할 수 있었고 그 답변을 굉장히 성의껏 이유와 함께 답변을 주십니다.\n3.다양한 매물중 어떤것이 가장 좋은 매물인지? 그 이유까지 알려주셔서 선택지를 좁히고 시간을 아낄수가 있습니다.\n4.나의 전재산이 들어가기때문에 물건을 정할때 마음이 불안합니다. 제가 맞는 선택을 한건가? 그럴때 부동산 전문가가 같이 결정을 해주니 나의 선택에 있어 덜 불안하다는 점\n5.나의 현재 상황과 조건들을 들어보고 그것에 맞게 매물 추천을 해주는 점.\n\n이 5가지가 전 가장 도움이 되었습니다.\n \n덕분에 저는 동탄을 갈아타기 해서 매수할 수 있었고 현재는 풍선효과로 가격이 제가 매수한 가격보다 많이 올랐습니다.\n시부님의 큐레이팅은 이가격에 믿을 수 없는 퀄리티 입니다. 큐레이팅을 안 받는것이 솔직히 손해라고 생각이드네요 ㅎㅎㅎㅎㅎ\n \n시부님 감사했습니다!!`,
                author: "변미소님", date: "2025-11-12", rating: 5, badge: "BEST"
            },
            {
                title: "[시크릿브라더] 부동산 큐레이팅 후기",
                content: `안녕하세요, 
10월 초 추석 연휴 전 큐레이팅을 신청 하였고, 실거주와 갭투자를 고민하는 상황이었습니다. 
결론을 먼저 말씀 드리자면 시크릿브라더님 큐레이팅 조언을 통해 실거주집을 매수하기로 계약을 한 상태입니다. 
결과부터 말씀드리자면 큐레이팅 내용에 대해 정말 대만족 입니다!

우선 간단하게 요약하자면 니즈와 상황을 말씀드리면 거기에 맞게 시브님이 생각하시는 답을 주십니다.
저는 당연히 부린이지만 나름의 고수님들도 많이 계실거라고 생각합니다. 하지만 저는 누구든 고민 끝에 내린 판단이라도 100% 확신을 갖지 못하고 불안감을 떨쳐낼 수는 없다고 생각합니다.
간단하게 원하는 규모, 지역이 정해져있었고 어느정도의 투자가 가능하다고 말씀드리면 거기에 맞게 답을 주셨습니다.
제 선택이 맞는지, 제 근거가 맞는지에 대해 시브님이 말씀하시는것과 맞추어보는 것이 아닌 그냥 원하는 방향에 대한 답을 들을 수 있는 것이 저는 아주 큰 장점이라 생각합니다.
누군가 투자하는데 명료하게 어디어디 하라고 알려주는 신뢰할 만한 곳은 정말 흔하지 않은 것 같습니다.
솔직히 질문에 대한 시브님의 답을 듣는 과정이 길지 않았고 명쾌했습니다.`,
                author: "김기용님", date: "2025-10-27", rating: 5, badge: "BEST"
            },
            {
                title: "큐레이팅 후기",
                content: `안녕하세요 큐레이팅 후기를 남깁니다.
저는 추석 연휴가 끝나고 큐레이팅을 시작해서 한 주만에 살던 집을 매도하고 새집을 매수하게 되었습니다.
처음에 큐레이팅을 신청할 때는 '정말로 이번 기회에 매도와 매수를 해야겠다' 이런 생각보다는 그간에 부동산에 대해서 제가 생각했던
시나리오를 누군가에게 검증 받아 보자라는 마음으로 시작했습니다.

사실 부동산이라는 것이 예민한 주제라 주변인들과 적극적인 토론을 하기는 좀 꺼려지는 경향이 있고 인터넷 카페에 고민을 올려도
고민에 댓글을 달아주는 분들의 상황이 다 저와 다르기 때문에 객관적인 상담은 어렵겠다고 생각했었습니다.

이때 마침 친구가 추천해준 '나는 1000만원으로 아파트 산다'라는 책의 저자 시크릿브라더가 생각나서 제 손으로 유투브를 검색해서 찾아내고
여기서 큐레이팅이 있다는 것을 보고 신청해서 상담을 받았습니다.

결과는 대만족이었습니다. 사실 이번에 매수까지 성공하지 못했더라도 굉장히 만족스러운 상담이었다고 생각합니다.
특히 저처럼 돌다리도 두드려보고 건너고 싶은 성격의 소유자이면서 또 남들이 하는 한마디에 맘이 크게 흔들릴 수 있는 분들에게 추천합니다.

다들 마음속에 '이렇게 이렇게 해서 이런 아파트를 사는게 좋지 않을까?' 라는 막연한 시나리오 들은 있을 겁니다.
이번에 큐레이팅을 받아 매도매수과정을 함께 해보니 이런 시나리오들을 행동으로 옮기는데
혼자서 해봤다면 (정말 괜찮은 좋은 방향의 시나리오라도) 많은 장애물들을 넘지 못하고 실행하지 못 했을 수도 있었을 거란 생각이 듭니다.

이번 부동산 거래는 인생에 있어 2번째이지만 가장 큰 부동산 거래 였는데 앞으로 어떻게 될지는 100% 장담할 순 없을 것 같습니다.
하지만 정말로 치열한 고민 끝에 내린 결정이었음을 이미 알고 있고 그러한 치열한 생각의 과정에서 옆에 있어 줬던 시크릿브라더에게 참 감사합니다.`,
                author: "이민석님", date: "2025-10-27", rating: 5, badge: "BEST"
            }
        ];

        // 2. 인증 및 초기화 (DOMContentLoaded 후 실행되도록 배치)
        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                console.log("Firebase Auth Success");
                
                // 로그인 상태 체크
                window.checkLoginStatus();
                // 베스트 후기 렌더링 (데이터가 정의된 후 호출)
                renderBestReviews();
            } catch (error) {
                console.error("Auth Error:", error);
            }
        };
        initAuth();

        // 3. 전역 함수 설정 (HTML onclick 연동)
        
        // --- UI 제어 함수 ---
        window.toggleModal = function(id) {
            const el = document.getElementById(id);
            if (el) el.classList.toggle('hidden');
        };

        window.openImageModal = function(src) {
            document.getElementById('modal-image-src').src = src;
            window.toggleModal('imageModal');
        };

        window.scrollToSection = function(id) {
            const el = document.getElementById(id);
            if(el) el.scrollIntoView({behavior:'smooth'});
        };

        window.toggleMobileMenu = function() {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        };

        window.toggleFaq = function(btn) {
            const ans = btn.nextElementSibling;
            const icon = btn.querySelector('svg');
            ans.classList.toggle('hidden');
            icon.style.transform = ans.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        };

        // --- 로그인/회원가입 관련 ---
        window.openLoginModal = function(tab) {
            window.toggleModal('loginModal');
            window.switchAuthTab(tab);
        };

        window.switchAuthTab = function(tab) {
            const loginForm = document.getElementById('form-login');
            const signupForm = document.getElementById('form-signup');
            const loginTab = document.getElementById('tab-login');
            const signupTab = document.getElementById('tab-signup');

            if (tab === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                loginTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                signupTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
            } else {
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
                signupTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                loginTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
            }
        };

        // 회원가입 (Firestore에 저장)
        window.processSignup = async function() {
            if (!auth.currentUser) return;

            const id = document.getElementById('reg-id').value.trim();
            const pw = document.getElementById('reg-pw').value.trim();
            const name = document.getElementById('reg-name').value.trim();
            const phone = document.getElementById('reg-phone').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const source = document.getElementById('reg-source').value;

            if(!id || !pw || !name) { alert("필수 정보를 입력해주세요."); return; }

            try {
                // 유저 중복 체크 (public collection 사용)
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + id); 
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    alert("이미 존재하는 아이디입니다.");
                    return;
                }

                await setDoc(userDocRef, {
                    id: id,
                    pw: pw, 
                    name: name,
                    phone: phone,
                    email: email,
                    source: source,
                    joinedAt: new Date().toISOString(),
                    paymentStatus: 'unpaid'
                });

                alert("회원가입이 완료되었습니다! 로그인해주세요.");
                window.switchAuthTab('login');
            } catch (e) {
                console.error("Signup Error:", e);
                alert("회원가입 중 오류가 발생했습니다.");
            }
        };

        // 로그인 (Firestore 조회)
        window.processLogin = async function() {
            if (!auth.currentUser) return;

            const id = document.getElementById('login-id').value.trim();
            const pw = document.getElementById('login-pw').value.trim();

            if(!id || !pw) { alert("아이디와 비밀번호를 입력해주세요."); return; }

            try {
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + id);
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    if (userData.pw === pw) {
                        // 세션 스토리지에 로그인 정보 저장
                        sessionStorage.setItem('sc_user_id', id);
                        sessionStorage.setItem('sc_user_name', userData.name);
                        alert(userData.name + "님 환영합니다!");
                        window.location.reload();
                    } else {
                        alert("비밀번호가 일치하지 않습니다.");
                    }
                } else {
                    alert("존재하지 않는 아이디입니다.");
                }
            } catch (e) {
                console.error("Login Error:", e);
                alert("로그인 중 오류가 발생했습니다.");
            }
        };

        window.handleLogout = function() {
            if(confirm("로그아웃 하시겠습니까?")) {
                sessionStorage.removeItem('sc_user_id');
                sessionStorage.removeItem('sc_user_name');
                window.location.reload();
            }
        };

        // 로그인 상태 및 결제 상태 확인
        window.checkLoginStatus = async function() {
            const userId = sessionStorage.getItem('sc_user_id');
            const userName = sessionStorage.getItem('sc_user_name');

            if (userId) {
                document.getElementById('auth-guest').classList.add('hidden-section');
                document.getElementById('auth-user').classList.remove('hidden-section');
                document.getElementById('user-name').innerText = userName;

                // 마이페이지 UI
                document.getElementById('mypage-guest').classList.add('hidden-section');
                document.getElementById('user-info-card').classList.remove('hidden-section');
                document.getElementById('mp-username').innerText = userName;
                document.getElementById('profile-initial').innerText = userName.charAt(0);

                // 결제 상태 확인 (DB)
                if (auth.currentUser) {
                    try {
                        const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + userId);
                        const docSnap = await getDoc(userDocRef);
                        if (docSnap.exists()) {
                            const status = docSnap.data().paymentStatus;
                            
                            const unpaidDiv = document.getElementById('mypage-user-unpaid');
                            const paidDiv = document.getElementById('status-paid');
                            const pendingDiv = document.getElementById('status-pending');

                            unpaidDiv.classList.add('hidden-section');
                            paidDiv.classList.add('hidden-section');
                            pendingDiv.classList.add('hidden-section');

                            if(status === 'paid') paidDiv.classList.remove('hidden-section');
                            else if(status === 'pending') pendingDiv.classList.remove('hidden-section');
                            else unpaidDiv.classList.remove('hidden-section');
                        }
                    } catch(e) { console.error(e); }
                }
            }
        };

        // --- 입금 신청 ---
        window.copyAccount = function() {
            const tempInput = document.createElement("input");
            tempInput.value = "521-063745-04-011";
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("계좌번호가 복사되었습니다: 521-063745-04-011");
        };

        window.checkPaymentLink = function(e, href) {
             if(href.includes('portone')) { 
                 e.preventDefault(); 
                 window.open(href, '_blank'); 
                 alert("결제 링크를 복사해오세요."); 
             } 
        };

        window.requestDeposit = async function() {
            const userId = sessionStorage.getItem('sc_user_id');
            if (!userId) {
                alert("로그인 후 신청 가능합니다.");
                return;
            }
            
            try {
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + userId);
                await updateDoc(userDocRef, { paymentStatus: 'pending' });
                alert("입금 확인 신청이 완료되었습니다.\n마이페이지에서 상태를 확인하세요.");
                window.checkLoginStatus(); 
            } catch(e) {
                console.error(e);
            }
        };


        // --- 후기 관련 로직 (조회수 연동 + 원본 데이터) ---
        
        const VIEW_KEY = "secretclass_review_views";
        const LAST_UPDATE_KEY = "secretclass_views_last_update";
        
        function loadViewData() { return JSON.parse(localStorage.getItem(VIEW_KEY) || "{}"); }
        function saveViewData(data) { localStorage.setItem(VIEW_KEY, JSON.stringify(data)); }

        function checkAndUpdateViews(data) {
            const now = Date.now();
            const lastUpdate = parseInt(localStorage.getItem(LAST_UPDATE_KEY) || 0);
            if (now - lastUpdate > 86400000) {
                for (let key in data) { data[key] += Math.floor(Math.random() * 5) + 1; }
                saveViewData(data);
                localStorage.setItem(LAST_UPDATE_KEY, now.toString());
            }
            return data;
        }

        function getViewCount(title, isBest) {
            let data = loadViewData();
            if (!data[title]) {
                const initialView = isBest 
                    ? Math.floor(Math.random() * (1200 - 900 + 1)) + 900 
                    : Math.floor(Math.random() * (500 - 150 + 1)) + 150;
                data[title] = initialView;
                saveViewData(data);
            }
            data = checkAndUpdateViews(data);
            return data[title];
        }

        function incrementViewCount(title) {
            let data = loadViewData();
            if (data[title]) {
                data[title] += 1;
                saveViewData(data);
            }
        }

        // HTML 엔티티 디코딩 및 줄바꿈 처리
        function decodeAndFormatHtml(html) {
            if(!html) return "";
            var txt = document.createElement("textarea");
            txt.innerHTML = html;
            let decoded = txt.value;
            // 줄바꿈만 있고 태그가 없는 경우 <br>로 변환하여 줄바꿈 유지
            if (!decoded.includes('<p>') && !decoded.includes('<br>')) {
                decoded = decoded.replace(/\n/g, '<br>');
            }
            return decoded;
        }

        // 렌더링 함수
        function renderBestReviews() {
            const bestContainer = document.getElementById('best-reviews-container');
            if (!bestContainer) return; // 요소가 아직 없으면 종료
            bestContainer.innerHTML = '';
            
            // 전역 reviewData 사용 (데이터가 위에 정의되어 있으므로 안전)
            bestReviews.forEach((review, index) => {
                const card = document.createElement('div');
                card.className = "bg-white p-8 rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 review-card flex flex-col";
                card.onclick = () => window.openReviewDetail(index);
                
                // 조회수 가져오기 (연동)
                review.views = getViewCount(review.title, true).toLocaleString();

                let stars = '';
                for(let i=0; i<5; i++) stars += `<i data-lucide="star" class="w-4 h-4 text-yellow-400 fill-current"></i>`;

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-1">${stars}</div>
                        <span class="bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded">BEST</span>
                    </div>
                    <h3 class="font-bold text-lg mb-3 text-gray-900 line-clamp-1">"${review.title}"</h3>
                    <div class="text-gray-600 text-sm leading-relaxed mb-6 line-clamp-4 break-keep raw-content">${decodeAndFormatHtml(review.content)}</div>
                    <div class="flex items-center justify-between pt-4 border-t border-gray-50 mt-auto">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-500">${review.author.charAt(0)}</div>
                            <div><p class="text-xs font-bold text-gray-900">${review.author}</p><p class="text-[10px] text-gray-400">${review.date}</p></div>
                        </div>
                        <div class="flex items-center gap-1 text-xs text-gray-400 font-medium"><i data-lucide="eye" class="w-4 h-4"></i> ${review.views.toLocaleString()}</div>
                    </div>
                `;
                bestContainer.appendChild(card);
            });
            lucide.createIcons();
        }

        window.openReviewDetail = function(index) {
            const review = bestReviews[index];
            document.getElementById('modal-review-title').innerText = review.title;
            // 줄바꿈 처리
            document.getElementById('modal-review-content').innerHTML = decodeAndFormatHtml(review.content).replace(/\n/g, '<br>');
            document.getElementById('modal-review-author').innerText = review.author;
            document.getElementById('modal-review-date').innerText = review.date;
            
            // 조회수 증가 및 동기화
            incrementViewCount(review.title);
            document.getElementById('modal-views').innerText = getViewCount(review.title, true).toLocaleString();
            
            const badge = document.getElementById('modal-review-badge');
            badge.innerText = "BEST";
            badge.classList.remove('hidden');
            
            window.toggleModal('reviewDetailModal');
            lucide.createIcons();
        };

        // 초기 로드
        if(document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", () => {
                lucide.createIcons();
                // initAuth(); -> module 안에서 실행됨
            });
        } else {
            // 이미 로드된 경우
            lucide.createIcons();
        }
    </script>
</body>
</html>