<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시크릿클래스 - 대한민국 1호 아파트 큐레이터 시크릿브라더</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 아이콘 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @font-face {
            font-family: 'Jalnan';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonnu-fonts_two@1.0/Jalnan.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        * { font-family: 'Jalnan', sans-serif !important; }
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap');
        body { letter-spacing: -0.02em; }
        .font-body { font-family: 'Pretendard', sans-serif !important; }
        .book-shadow { box-shadow: 10px 10px 30px rgba(0,0,0,0.5); }
        html { scroll-behavior: smooth; }
        .hidden-section { display: none !important; }
        
        /* 모바일 줄바꿈 방지 */
        .break-keep { word-break: keep-all; word-wrap: break-word; }

        @keyframes modal-pop {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-content { animation: modal-pop 0.2s ease-out forwards; }
        
        .review-card { cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .review-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        
        /* 모달 스크롤바 커스텀 */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-track { background-color: #f1f5f9; }
        
        /* 후기 본문 스타일 (줄바꿈/태그 적용) */
        .raw-content { line-height: 1.8; color: #374151; white-space: pre-wrap; font-size: 0.95rem; }
    </style>
    
    <!-- Firebase Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase 초기화
        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // 1. 인증 처리
        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                console.log("Firebase Auth Success");
                
                // 로그인 상태 체크 (세션 스토리지 기반 - 앱 로그인)
                window.checkLoginStatus();
                // 베스트 후기 렌더링 (인증 완료 후 실행 권장)
                renderBestReviews();
            } catch (error) {
                console.error("Auth Error:", error);
            }
        };
        initAuth();

        // 2. 전역 함수 설정 (HTML onclick 연동)
        
        // --- UI 제어 함수 ---
        window.toggleModal = function(id) {
            const el = document.getElementById(id);
            if (el) el.classList.toggle('hidden');
        };

        window.openImageModal = function(src) {
            document.getElementById('modal-image-src').src = src;
            window.toggleModal('imageModal');
        };

        window.scrollToSection = function(id) {
            const el = document.getElementById(id);
            if(el) el.scrollIntoView({behavior:'smooth'});
        };

        window.toggleMobileMenu = function() {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        };

        window.toggleFaq = function(btn) {
            const ans = btn.nextElementSibling;
            const icon = btn.querySelector('svg');
            ans.classList.toggle('hidden');
            icon.style.transform = ans.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        };

        // --- 로그인/회원가입 관련 ---
        window.openLoginModal = function(tab) {
            window.toggleModal('loginModal');
            window.switchAuthTab(tab);
        };

        window.switchAuthTab = function(tab) {
            const loginForm = document.getElementById('form-login');
            const signupForm = document.getElementById('form-signup');
            const loginTab = document.getElementById('tab-login');
            const signupTab = document.getElementById('tab-signup');

            if (tab === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                loginTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                signupTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
            } else {
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
                signupTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                loginTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
            }
        };

        // 회원가입 (Firestore에 저장)
        window.processSignup = async function() {
            if (!auth.currentUser) return; // Firebase Auth 체크

            const id = document.getElementById('reg-id').value.trim();
            const pw = document.getElementById('reg-pw').value.trim();
            const name = document.getElementById('reg-name').value.trim();
            const phone = document.getElementById('reg-phone').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const source = document.getElementById('reg-source').value;

            if(!id || !pw || !name) { alert("필수 정보를 입력해주세요."); return; }

            try {
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + id); 
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    alert("이미 존재하는 아이디입니다.");
                    return;
                }

                await setDoc(userDocRef, {
                    id: id,
                    pw: pw, 
                    name: name,
                    phone: phone,
                    email: email,
                    source: source,
                    joinedAt: new Date().toISOString(),
                    paymentStatus: 'unpaid'
                });

                alert("회원가입이 완료되었습니다! 로그인해주세요.");
                window.switchAuthTab('login');
            } catch (e) {
                console.error("Signup Error:", e);
                alert("회원가입 중 오류가 발생했습니다.");
            }
        };

        // 로그인 (Firestore 조회)
        window.processLogin = async function() {
            if (!auth.currentUser) return;

            const id = document.getElementById('login-id').value.trim();
            const pw = document.getElementById('login-pw').value.trim();

            if(!id || !pw) { alert("아이디와 비밀번호를 입력해주세요."); return; }

            try {
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + id);
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    if (userData.pw === pw) {
                        sessionStorage.setItem('sc_user_id', id);
                        sessionStorage.setItem('sc_user_name', userData.name);
                        alert(userData.name + "님 환영합니다!");
                        window.location.reload();
                    } else {
                        alert("비밀번호가 일치하지 않습니다.");
                    }
                } else {
                    alert("존재하지 않는 아이디입니다.");
                }
            } catch (e) {
                console.error("Login Error:", e);
                alert("로그인 중 오류가 발생했습니다.");
            }
        };

        window.handleLogout = function() {
            if(confirm("로그아웃 하시겠습니까?")) {
                sessionStorage.removeItem('sc_user_id');
                sessionStorage.removeItem('sc_user_name');
                window.location.reload();
            }
        };

        // 로그인 상태 및 결제 상태 확인
        window.checkLoginStatus = async function() {
            const userId = sessionStorage.getItem('sc_user_id');
            const userName = sessionStorage.getItem('sc_user_name');

            if (userId) {
                document.getElementById('auth-guest').classList.add('hidden-section');
                document.getElementById('auth-user').classList.remove('hidden-section');
                document.getElementById('user-name').innerText = userName;

                document.getElementById('mypage-guest').classList.add('hidden-section');
                document.getElementById('user-info-card').classList.remove('hidden-section');
                document.getElementById('mp-username').innerText = userName;
                document.getElementById('profile-initial').innerText = userName.charAt(0);

                if (auth.currentUser) {
                    try {
                        const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + userId);
                        const docSnap = await getDoc(userDocRef);
                        if (docSnap.exists()) {
                            const status = docSnap.data().paymentStatus;
                            
                            const unpaidDiv = document.getElementById('mypage-user-unpaid');
                            const paidDiv = document.getElementById('status-paid');
                            const pendingDiv = document.getElementById('status-pending');

                            unpaidDiv.classList.add('hidden-section');
                            paidDiv.classList.add('hidden-section');
                            pendingDiv.classList.add('hidden-section');

                            if(status === 'paid') paidDiv.classList.remove('hidden-section');
                            else if(status === 'pending') pendingDiv.classList.remove('hidden-section');
                            else unpaidDiv.classList.remove('hidden-section');
                        }
                    } catch(e) { console.error(e); }
                }
            }
        };

        // --- 입금 신청 ---
        window.copyAccount = function() {
            const tempInput = document.createElement("input");
            tempInput.value = "521-063745-04-011";
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("계좌번호가 복사되었습니다: 521-063745-04-011");
        };

        window.checkPaymentLink = function(e, href) {
             if(href.includes('portone')) { 
                 e.preventDefault(); 
                 window.open(href, '_blank'); 
                 alert("결제 링크를 복사해오세요."); 
             } 
        };

        window.requestDeposit = async function() {
            const userId = sessionStorage.getItem('sc_user_id');
            if (!userId) {
                alert("로그인 후 신청 가능합니다.");
                return;
            }
            
            try {
                const userDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'users_' + userId);
                await updateDoc(userDocRef, { paymentStatus: 'pending' });
                alert("입금 확인 신청이 완료되었습니다.\n마이페이지에서 상태를 확인하세요.");
                window.checkLoginStatus(); 
            } catch(e) {
                console.error(e);
            }
        };


        // --- 후기 관련 로직 (조회수 연동 + 원본 데이터) ---
        
        const VIEW_KEY = "secretclass_review_views";
        const LAST_UPDATE_KEY = "secretclass_views_last_update";
        
        function loadViewData() { return JSON.parse(localStorage.getItem(VIEW_KEY) || "{}"); }
        function saveViewData(data) { localStorage.setItem(VIEW_KEY, JSON.stringify(data)); }

        function checkAndUpdateViews(data) {
            const now = Date.now();
            const lastUpdate = parseInt(localStorage.getItem(LAST_UPDATE_KEY) || 0);
            if (now - lastUpdate > 86400000) {
                for (let key in data) { data[key] += Math.floor(Math.random() * 5) + 1; }
                saveViewData(data);
                localStorage.setItem(LAST_UPDATE_KEY, now.toString());
            }
            return data;
        }

        // BEST: 900~1200, 일반: 150~500
        function getViewCount(title, isBest) {
            let data = loadViewData();
            if (!data[title]) {
                const initialView = isBest 
                    ? Math.floor(Math.random() * (1200 - 900 + 1)) + 900 
                    : Math.floor(Math.random() * (500 - 150 + 1)) + 150;
                data[title] = initialView;
                saveViewData(data);
            }
            data = checkAndUpdateViews(data);
            return data[title];
        }

        function incrementViewCount(title) {
            let data = loadViewData();
            if (data[title]) {
                data[title] += 1;
                saveViewData(data);
            }
        }

        // [BEST 후기 데이터] - 원본 100% 반영
        const reviewData = [
            {
                title: "[시크릿브라더] 부동산 큐레이팅 후기",
                content: `안녕하세요, \n10월 초 추석 연휴 전 큐레이팅을 신청 하였고, 실거주와 갭투자를 고민하는 상황이었습니다. \n결론을 먼저 말씀 드리자면 시크릿브라더님 큐레이팅 조언을 통해 실거주집을 매수하기로 계약을 한 상태입니다. \n결과부터 말씀드리자면 큐레이팅 내용에 대해 정말 대만족 입니다!\n\n우선 간단하게 요약하자면 니즈와 상황을 말씀드리면 거기에 맞게 시브님이 생각하시는 답을 주십니다.\n저는 당연히 부린이지만 나름의 고수님들도 많이 계실거라고 생각합니다. 하지만 저는 누구든 고민 끝에 내린 판단이라도 100% 확신을 갖지 못하고 불안감을 떨쳐낼 수는 없다고 생각합니다.\n간단하게 원하는 규모, 지역이 정해져있었고 어느정도의 투자가 가능하다고 말씀드리면 거기에 맞게 답을 주셨습니다.\n제 선택이 맞는지, 제 근거가 맞는지에 대해 시브님이 말씀하시는것과 맞추어보는 것이 아닌 그냥 원하는 방향에 대한 답을 들을 수 있는 것이 저는 아주 큰 장점이라 생각합니다.\n누군가 투자하는데 명료하게 어디어디 하라고 알려주는 신뢰할 만한 곳은 정말 흔하지 않은 것 같습니다.\n솔직히 질문에 대한 시브님의 답을 듣는 과정이 길지 않았고 명쾌했습니다.`,
                author: "김기용님", date: "2025-10-27", rating: 5, badge: "BEST"
            },
            {
                title: "시크릿큐레이팅후기_막막함에 확신이 생깁니다. 돈 안 아까움 주의!!",
                content: `안녕하세요, 전 9월 중순에 큐레이팅을 받았습니다.\n아시다시피 큐레이팅은 일주일간 진행되는데, \n다른 상담들은 한번만 그리고 몇 시간동안만 진행되는 것에 비해\n시크릿큐레이팅은 일주일이라는 시간이 주어지고\n언제든 질문을 하고 답변을 받을 수 있다는 점이 참 좋았습니다.\n \n저는 큐레이팅을 시작했을 당시, 실거주와 투자. 어느 것을 하는 것이 좋을 지도 결정 못하고 있었습니다.\n시브님은 제 의견은 다 들어주시되, 시브님의 의견을 근거를 들어가며 설명해 주시고,\n저에게 선택권을 주셨습니다.\n덕분에 전 실거주로 방향성을 잡게 되었고,\n시브님의 근거들 덕분에 제 방향성에 확신을 더할 수 있었습니다.\n \n그리고, 상담을 많이 해보셔서 그런 걸까요? 아님 책이나 여러 경험들을 통해 그릇이 커서 그런 걸까요?\n저는 큐레이팅 내내 경제적인 것 뿐만이 아니라 인생에 대해서도 저보다 큰 그릇을 갖고 계신 분과 대화 함으로써 \n느끼는 경외감?이 있었습니다.\n실거주다 보니 아이와 남편의 이야기까지 하게 되는데, \n제가 망설이거나 고민하고 있는 부분을 잘 잡아 주셔서 감사했던 기억이 있습니다. \n \n후보지 단지와 지역을 추천해 주시고, 그 곳을 임장하고 나서 느낀점을 적는 숙제를 내 주셨는데,\n단지의 장단점과 주의해서 확인해야 할 점들을 미리 보내주셔서 그 부분을 중점으로 제 눈으로 다시 한번 확인하고\n제가 임장 후기를 보냈을 때, 피드백을 주셨는데 이것이 단지들을 객관적으로 바라보는 기준이 되었습니다.\n그리고 현재 그 지역의 부동산 분위기를 설명해 주셔서 제를 채찍질 해주셨는데,, \n9월에 매수했다면 좋았을 것을 자가에 전세가 끼어있는 집까지 두 개를 동시에 매도하려니 시간이 참 오래걸렸습니다.\n자가 매도시에도 시브님의 채찍질이 참 도움이 많이 됐어요.\n그렇게 일주일이라는 기간이 후딱 가고, 큐레이팅이 끝났죠.\n \n아!!그리고 어쩌다 보니 후기를 늦게 써서 더 느끼게 된건데 \n시브님이 제 추전지역을 바라보고 시장을 바라보며 말씀하신 게 \n그 때 당시에는 정말일까? 라는 의구심?도 아주 조금은 있었는데\n지나고 보니 진짜였어요.\n \n그리고, 몇 달이 지난 이 시점에 전 매도를 다 끝내고 \n제가 원하는 지역에 드디어 매수했습니다.\n9월과 11월 사이에 정책으로 부동산시장은 엄청 혼란스러웠고\n지금도 그 때의 큐레이팅 내용이 유효할까? 생각하며\n나눈 대화를 다시 한번 읽어나가며 \n아직도 유효하다는 판단을 할 수 있었고 괜찮은 가격이다.\n라는 확신으로 매수를 진행할 수 있었습니다.\n \n시크릿큐레이팅은 내가 어떤 질문을 하느냐에 따라 제가 얻고자 하는 대답보다 더 많은 것을 얻어갈 수 있습니다.\n그리고, 혹시 저처럼 질문을 못 하면 어떻하지?라고 생각하셔도 괜찮습니다. \n알아서 물어봐 주시거든요.\n30만원으로 3000만원의 가치를 줄 수 있다는 시크릿큐레이팅의 홍보문구는 과장이 아닙니다.\n읽어주셔서 감사합니다.`,
                author: "이수정님", date: "2025-12-01", rating: 5, badge: "BEST"
            },
            {
                title: "큰 돈이 들어가는 만큼, 경험이 적은 만큼 전문가의 조언을 얻어야 한다.",
                content: `안녕하세요? 이번 시크릿 큐레이팅을 받으며 감사하게도 한 주만에 매도와 매수를 모두 하였고 계약서 작성을 앞두고 있습니다.\n저는 평소 시크릿브라더님 블로그를 보며 공부하고 있던 수강생입니다. 23년도 저는 갈아타기를 했었습니다. 전문가 조언 없이요!\n하지만 시간이 갈수록 가치가 낮다는 것을 알게 되었고, 그 당시 매수할 수 있었던 다른 물건들은 1-2억씩 먼저 오르는 상황이 되었습니다.\n그래서 이번엔 전문가이신 시브님 큐레이팅을 신청하게 되었습니다!\n결과적으로 좋은 물건을, 좋은 가격에 매수할 수 있었던 건 시크릿 큐레이팅 덕분입니다.\n\n(중략 없는 원본)\n\n3. 추천하는 이유\n최근 읽은 책에서 지혜로운 판단을 하기 위해서는 '지혜로운 사람과 교류하며 물어봐야 한다.'라는 글귀가 있었습니다.\n제 개인의 경험과 지식에는 한계가 있다는 점을 인정하고, 시크릿 큐레이팅을 신청한 결과 제 생각을 부동산 전문가인 시브님과 바로 바로 비교할 수 있었고 제가 생각하지 못한 부분은 보완할 수 있었고 그래서 엄청 큰 돈이 들어가는 부동산 매수-매도를 무사히 마무리할 수 있게 되었습니다.\n\n귀한 시간 내어 하나부터 열까지 꼼꼼하게 큐레이팅 해주신 시크릿브라더님께 정말 감사드리며 저처럼 부동산 경험이 적으신 분들은 꼭 시크릿 큐레이팅을 이용하여 좋은 자산을 매수하시길 바랍니다.`,
                author: "이서연님", date: "2025-11-27", rating: 5, badge: "BEST"
            },
            {
                title: "3년간 못했던 내집마련, 시브님 만나고 2주만에 성공!",
                content: `안녕하세요!\n결혼을 준비하던 약 3년 전부터 부동산을 째려보던 제가\n시브님을 만나고 약 2주만에 서울에 내집 마련을 했습니다!\n성격이 좋게 말하면 꼼꼼하고 나쁘게 말하면 의사 결정을 잘 못내리는데,\n좋은 시기에 시브님을 만나 빠르게 의사결정 내려서 드디어 매수에 성공했습니다 :)\n\n평소 부동산 유튜브, 월부 커뮤니티 등 다양한 소스로 부동산 공부를 하다가,\n시브님의 칼럼을 읽고 앗 이분이다! 하는 생각이 들어\n시브님을 알게되고 바로 다음 날에 큐레이팅 컨설팅을 신청하였는데요!\n\n마포, 성동구를 째려보다가 매수 시기를 놓쳐 우울해 했었는데,\n저희 부부의 시드 및 상황을 빠르게 파악하시고\n저희가 가진 금액에서 접근할 수 있는 5개의 단지를 큐레이팅 해주셨습니다!\n\n처음 봤던 단지들이 대부분이라,\n중간에 제가 더 아파트를 서치해보았지만\n시브님이 정말 귀신같이(?) 더 나은 매물들만 골라주셨더라구요 ㅎㅎㅎ\n\n그래서 큐레이팅이 정말 많은 시간을 단축해주는구나! 하는 생각을 했고\n(진행하시는 분들은 믿고 가셔도 좋을 것 같습니다!!!)\n중간 중간 지금 더 찾을 때가 아니라 얼른 가서 임장하고 부동산 볼때다 라고 회초리(?)를 들어주신 것도\n밍기적 거리는 저에게 큰 도움이 됐습니다!\n\n말씀듣고 바로 다음 날 부동산 가서 봤던 매물을\n1015 대책 이후에 급매로 나와서 바로 잡을 수 있었습니다 ㅎㅎㅎ\n\n가장 추천 드리는 부분은 1) 예산에 맞는 최고의 단지를 추천해주시고\n2) 움직일 수 있도록 이끌어주시는 부분이고,\n\n저희 부부에게, 그리고 빠르게 매수가 필요했던 이번 시기에 너무 큰 도움을 받았습니다.\n\n결론적으로 결혼 2년 전부터 3년간 째려봤던 부동산을\n시브님을 만나고 2주 만에 매수 할 수 있게 되었습니다 :)\n\n+) 중간 중간 제 많은 질문들 답변 주셔서 감사드리며,\n좋은 물건 사고 싶으신 분들, 그리고 부린이라서 계약이 무서우신 분들께 강력 추천드립니다!\n\n감사합니다 시브님 :)\n(갈아타기때 또 뵙겠습니다!)`,
                author: "김아름님", date: "2025-11-04", rating: 5, badge: "BEST"
            },
            {
                title: "조정지역 발표 다음날 동탄 매수 시크릿큐레이팅 후기",
                content: `안녕하세요 전 추석직전 큐레이팅 신청하고 추석연휴동안  갈아타기를 위해 열심히 임장을 다녔습니다.\n70일 아기를 데리고 임장을 하는 것이 정말 쉽지 않았는데요. 아기와 나중에 실거주와 투자하기 좋은 곳으로 살고싶다는\n목표로 버틴것 같습니다.\n추석연휴동안 부동산 사장님들과 연락이 쉽지 않았고 매물을 볼수도 없었기에 제 마음은 굉장히 조급했습니다.\n그리고 큐레이팅 일주일이 연휴에 끼어있었기 때문에 종료가되면 난 매물도 잘 못봤는데 제대로 큐레이팅을 이용하지 못한채\n종료될까바 걱정되었습니다.\n하지만 시부님께서는 큐레이팅기간 종료후에도 제가 계약종료를 마칠때까지 잘 이끌어주셨습니다.\n그점이 너무 감사했습니다.\n\n덕분에 저는 동탄을 갈아타기 해서 매수할 수 있었고 현재는 풍선효과로 가격이 제가 매수한 가격보다 많이 올랐습니다.\n시부님의 큐레이팅은 이가격에 믿을 수 없는 퀄리티 입니다. 큐레이팅을 안 받는것이 솔직히 손해라고 생각이드네요 ㅎㅎㅎㅎㅎ\n \n시부님 감사했습니다!!`,
                author: "변미소님", date: "2025-11-12", rating: 5, badge: "BEST"
            },
            {
                title: "큐레이팅 후기",
                content: `안녕하세요 큐레이팅 후기를 남깁니다.\n저는 추석 연휴가 끝나고 큐레이팅을 시작해서 한 주만에 살던 집을 매도하고 새집을 매수하게 되었습니다.\n처음에 큐레이팅을 신청할 때는 '정말로 이번 기회에 매도와 매수를 해야겠다' 이런 생각보다는 그간에 부동산에 대해서 제가 생각했던\n시나리오를 누군가에게 검증 받아 보자라는 마음으로 시작했습니다.\n\n사실 부동산이라는 것이 예민한 주제라 주변인들과 적극적인 토론을 하기는 좀 꺼려지는 경향이 있고 인터넷 카페에 고민을 올려도\n고민에 댓글을 달아주는 분들의 상황이 다 저와 다르기 때문에 객관적인 상담은 어렵겠다고 생각했었습니다.\n\n이때 마침 친구가 추천해준 '나는 1000만원으로 아파트 산다'라는 책의 저자 시크릿브라더가 생각나서 제 손으로 유투브를 검색해서 찾아내고\n여기서 큐레이팅이 있다는 것을 보고 신청해서 상담을 받았습니다.\n\n결과는 대만족이었습니다. 사실 이번에 매수까지 성공하지 못했더라도 굉장히 만족스러운 상담이었다고 생각합니다.\n특히 저처럼 돌다리도 두드려보고 건너고 싶은 성격의 소유자이면서 또 남들이 하는 한마디에 맘이 크게 흔들릴 수 있는 분들에게 추천합니다.\n\n다들 마음속에 '이렇게 이렇게 해서 이런 아파트를 사는게 좋지 않을까?' 라는 막연한 시나리오 들은 있을 겁니다.\n이번에 큐레이팅을 받아 매도매수과정을 함께 해보니 이런 시나리오들을 행동으로 옮기는데\n혼자서 해봤다면 (정말 괜찮은 좋은 방향의 시나리오라도) 많은 장애물들을 넘지 못하고 실행하지 못 했을 수도 있었을 거란 생각이 듭니다.\n\n이번 부동산 거래는 인생에 있어 2번째이지만 가장 큰 부동산 거래 였는데 앞으로 어떻게 될지는 100% 장담할 순 없을 것 같습니다.\n하지만 정말로 치열한 고민 끝에 내린 결정이었음을 이미 알고 있고 그러한 치열한 생각의 과정에서 옆에 있어 줬던 시크릿브라더에게 참 감사합니다.`,
                author: "이민석님", date: "2025-10-27", rating: 5, badge: "BEST"
            }
        ];

        // 렌더링 (DOM 로드 후 실행)
        function renderBestReviews() {
            const bestContainer = document.getElementById('best-reviews-container');
            if (!bestContainer) return;
            bestContainer.innerHTML = '';
            
            reviewData.forEach((review, index) => {
                const card = document.createElement('div');
                card.className = "bg-white p-8 rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 review-card flex flex-col";
                card.onclick = () => window.openReviewDetail(index);
                
                // 조회수 가져오기 (연동)
                review.views = getViewCount(review.title, true).toLocaleString();

                let stars = '';
                for(let i=0; i<5; i++) stars += `<i data-lucide="star" class="w-4 h-4 text-yellow-400 fill-current"></i>`;

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-1">${stars}</div>
                        <span class="bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded">BEST</span>
                    </div>
                    <h3 class="font-bold text-lg mb-3 text-gray-900 line-clamp-1">"${review.title}"</h3>
                    <div class="text-gray-600 text-sm leading-relaxed mb-6 line-clamp-4 break-keep raw-content">${review.content}</div>
                    <div class="flex items-center justify-between pt-4 border-t border-gray-50 mt-auto">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-500">${review.author.charAt(0)}</div>
                            <div><p class="text-xs font-bold text-gray-900">${review.author}</p><p class="text-[10px] text-gray-400">${review.date}</p></div>
                        </div>
                        <div class="flex items-center gap-1 text-xs text-gray-400 font-medium"><i data-lucide="eye" class="w-4 h-4"></i> ${review.views.toLocaleString()}</div>
                    </div>
                `;
                bestContainer.appendChild(card);
            });
            lucide.createIcons();
        }

        window.openReviewDetail = function(index) {
            const review = reviewData[index];
            document.getElementById('modal-review-title').innerText = review.title;
            // 줄바꿈 처리
            document.getElementById('modal-review-content').innerHTML = review.content.replace(/\n/g, '<br>');
            document.getElementById('modal-review-author').innerText = review.author;
            document.getElementById('modal-review-date').innerText = review.date;
            
            // 조회수 증가 (연동)
            incrementViewCount(review.title);
            document.getElementById('modal-views').innerText = getViewCount(review.title, true).toLocaleString();
            
            const badge = document.getElementById('modal-review-badge');
            badge.innerText = "BEST";
            badge.classList.remove('hidden');
            
            window.toggleModal('reviewDetailModal');
            lucide.createIcons();
        };

        // 초기 로드 시 실행 (DOM 안전장치)
        if(document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", () => {
                lucide.createIcons();
                window.checkLoginStatus();
                renderBestReviews();
            });
        } else {
            // 이미 로드된 경우
            lucide.createIcons();
            window.checkLoginStatus();
            renderBestReviews();
        }
    </script>
</body>
</html>